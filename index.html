

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Mattermostdriver documentation &mdash; mattermostdriver 7.2.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Endpoints" href="endpoints.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="#" class="icon icon-home"> mattermostdriver
          

          
          </a>

          
            
            
              <div class="version">
                7.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="endpoints.html">Endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">CHANGELOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">CONTRIBUTING</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">mattermostdriver</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>Mattermostdriver documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mattermostdriver-documentation">
<h1>Mattermostdriver documentation<a class="headerlink" href="#mattermostdriver-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="endpoints.html">Endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">CHANGELOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">CONTRIBUTING</a></li>
</ul>
</div>
<p>See <a class="reference external" href="https://github.com/Vaelor/python-mattermost-driver">https://github.com/Vaelor/python-mattermost-driver</a> for the github repository.</p>
<p>You interact with this module mainly by using the Driver class.
If you want to access information about the logged in user, like the user id,
you can access them by using <cite>Driver.client.userid</cite>.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">mattermostdriver</span></code></p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mattermostdriver</span> <span class="kn">import</span> <span class="n">Driver</span>

<span class="n">foo</span> <span class="o">=</span> <span class="n">Driver</span><span class="p">({</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Required options</span>

<span class="sd">    Instead of the login/password, you can also use a personal access token.</span>
<span class="sd">    If you have a token, you don&#39;t need to pass login/pass.</span>
<span class="sd">    It is also possible to use &#39;auth&#39; to pass a auth header in directly,</span>
<span class="sd">    for an example, see:</span>
<span class="sd">    https://vaelor.github.io/python-mattermost-driver/#authentication</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;mattermost.server.com&#39;</span><span class="p">,</span>
    <span class="s1">&#39;login_id&#39;</span><span class="p">:</span> <span class="s1">&#39;user.name&#39;</span><span class="p">,</span>
    <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;verySecret&#39;</span><span class="p">,</span>
    <span class="s1">&#39;token&#39;</span><span class="p">:</span> <span class="s1">&#39;YourPersonalAccessToken&#39;</span><span class="p">,</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Optional options</span>

<span class="sd">    These options already have useful defaults or are just not needed in every case.</span>
<span class="sd">    In most cases, you won&#39;t need to modify these, especially the basepath.</span>
<span class="sd">    If you can only use a self signed/insecure certificate, you should set</span>
<span class="sd">    verify to your CA file or to False. Please double check this if you have any errors while</span>
<span class="sd">    using a self signed certificate!</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="s1">&#39;scheme&#39;</span><span class="p">:</span> <span class="s1">&#39;https&#39;</span><span class="p">,</span>
    <span class="s1">&#39;port&#39;</span><span class="p">:</span> <span class="mi">8065</span><span class="p">,</span>
    <span class="s1">&#39;basepath&#39;</span><span class="p">:</span> <span class="s1">&#39;/api/v4&#39;</span><span class="p">,</span>
    <span class="s1">&#39;verify&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1"># Or /path/to/file.pem</span>
    <span class="s1">&#39;mfa_token&#39;</span><span class="p">:</span> <span class="s1">&#39;YourMFAToken&#39;</span><span class="p">,</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Setting this will pass the your auth header directly to</span>
<span class="sd">    the request libraries &#39;auth&#39; parameter.</span>
<span class="sd">    You probably only want that, if token or login/password is not set or</span>
<span class="sd">    you want to set a custom auth header.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="s1">&#39;auth&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    If for some reasons you get regular timeouts after a while, try to decrease</span>
<span class="sd">    this value. The websocket will ping the server in this interval to keep the connection</span>
<span class="sd">    alive.</span>
<span class="sd">    If you have access to your server configuration, you can of course increase the timeout</span>
<span class="sd">    there.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This value controls the request timeout.</span>
<span class="sd">    See https://python-requests.org/en/master/user/advanced/#timeouts</span>
<span class="sd">    for more information.</span>
<span class="sd">    The default value is None here, because it is the default in the</span>
<span class="sd">    request library, too.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="s1">&#39;request_timeout&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Setting debug to True, will activate a very verbose logging.</span>
<span class="sd">    This also activates the logging for the requests package,</span>
<span class="sd">    so you can see every request you send.</span>

<span class="sd">    Be careful. This SHOULD NOT be active in production, because this logs a lot!</span>
<span class="sd">    Even the password for your account when doing driver.login()!</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="s1">&#39;debug&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">})</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Most of the requests need you to be logged in, so calling login()</span>
<span class="sd">should be the first thing you do after you created your Driver instance.</span>
<span class="sd">login() returns the raw response.</span>
<span class="sd">If using a personal access token, you still need to run login().</span>
<span class="sd">In this case, does not make a login request, but a `get_user(&#39;me&#39;)`</span>
<span class="sd">and sets everything up in the client.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">foo</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">You can make api calls by using calling `Driver.endpointofchoice`.</span>
<span class="sd">Using api[&#39;&#39;] is deprecated for 5.0.0!</span>

<span class="sd">So, for example, if you used `Driver.api[&#39;users&#39;].get_user(&#39;me&#39;)` before,</span>
<span class="sd">you now just do `Driver.users.get_user(&#39;me&#39;)`.</span>
<span class="sd">The names of the endpoints and requests are almost identical to</span>
<span class="sd">the names on the api.mattermost.com/v4 page.</span>
<span class="sd">API calls always return the json the server send as a response.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">foo</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">get_user_by_username</span><span class="p">(</span><span class="s1">&#39;another.name&#39;</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">If the api request needs additional parameters</span>
<span class="sd">you can pass them to the function in the following way:</span>
<span class="sd">- Path parameters are always simple parameters you pass to the function</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">foo</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="s1">&#39;me&#39;</span><span class="p">)</span>

<span class="c1"># - Query parameters are always passed by passing a `params` dict to the function</span>
<span class="n">foo</span><span class="o">.</span><span class="n">teams</span><span class="o">.</span><span class="n">get_teams</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="o">...</span><span class="p">})</span>

<span class="c1"># - Request Bodies are always passed by passing an `options` dict or array to the function</span>
<span class="n">foo</span><span class="o">.</span><span class="n">channels</span><span class="o">.</span><span class="n">create_channel</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="o">...</span><span class="p">})</span>

<span class="c1"># See the mattermost api documentation to see which parameters you need to pass.</span>
<span class="n">foo</span><span class="o">.</span><span class="n">channels</span><span class="o">.</span><span class="n">create_channel</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;team_id&#39;</span><span class="p">:</span> <span class="s1">&#39;some_team_id&#39;</span><span class="p">,</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;awesome-channel&#39;</span><span class="p">,</span>
    <span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;awesome channel&#39;</span><span class="p">,</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;O&#39;</span>
<span class="p">})</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">If you want to make a websocket connection to the mattermost server</span>
<span class="sd">you can call the init_websocket method, passing an event_handler.</span>
<span class="sd">Every Websocket event send by mattermost will be send to that event_handler.</span>
<span class="sd">See the API documentation for which events are available.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">foo</span><span class="o">.</span><span class="n">init_websocket</span><span class="p">(</span><span class="n">event_handler</span><span class="p">)</span>

<span class="c1"># Use `disconnect()` to disconnect the websocket</span>
<span class="n">foo</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>

<span class="c1"># To upload a file you will need to pass a `files` dictionary</span>
<span class="n">channel_id</span> <span class="o">=</span> <span class="n">foo</span><span class="o">.</span><span class="n">channels</span><span class="o">.</span><span class="n">get_channel_by_name_and_team_name</span><span class="p">(</span><span class="s1">&#39;team&#39;</span><span class="p">,</span> <span class="s1">&#39;channel&#39;</span><span class="p">)[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
<span class="n">file_id</span> <span class="o">=</span> <span class="n">foo</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">upload_file</span><span class="p">(</span>
    <span class="n">channel_id</span><span class="o">=</span><span class="n">channel_id</span>
    <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;files&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">))}</span>
<span class="p">)[</span><span class="s1">&#39;file_infos&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>


<span class="c1"># track the file id and pass it in `create_post` options, to attach the file</span>
<span class="n">foo</span><span class="o">.</span><span class="n">posts</span><span class="o">.</span><span class="n">create_post</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;channel_id&#39;</span><span class="p">:</span> <span class="n">channel_id</span><span class="p">,</span>
    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;This is the important file&#39;</span><span class="p">,</span>
    <span class="s1">&#39;file_ids&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">file_id</span><span class="p">]})</span>

<span class="c1"># If needed, you can make custom requests by calling `make_request`</span>
<span class="n">foo</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">make_request</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="s1">&#39;/endpoint&#39;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">basepath</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="c1"># If you want to call a webhook/execute it use the `call_webhook` method.</span>
<span class="c1"># This method does not exist on the mattermost api AFAIK, I added it for ease of use.</span>
<span class="n">foo</span><span class="o">.</span><span class="n">webhooks</span><span class="o">.</span><span class="n">call_webhook</span><span class="p">(</span><span class="s1">&#39;myHookId&#39;</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span> <span class="c1"># Options are optional</span>
</pre></div>
</div>
</div>
<div class="section" id="authentication">
<h2>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h2>
<p>Yuu can either use the normal ways for login, by token and or username,
or authenticate using the .netrc file. This passes the credentials to the
requests library, where you can also read more about that.</p>
<p>A nice example for authentication with .netrc by <a class="reference external" href="https://github.com/apfeiffer1">&#64;apfeiffer</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="c1"># A simple example to retrieve all users for a team while using a _token_ </span>
<span class="c1"># from the .netrc file instead of a password (as requests assumes by default)</span>

<span class="kn">import</span> <span class="nn">logging</span> 
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">netrc</span>

<span class="kn">from</span> <span class="nn">mattermostdriver</span> <span class="kn">import</span> <span class="n">Driver</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(levelname)s</span><span class="s1"> - </span><span class="si">%(name)s</span><span class="s1"> - </span><span class="si">%(asctime)s</span><span class="s1"> - </span><span class="si">%(message)s</span><span class="s1">&#39;</span> <span class="p">)</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span> <span class="s1">&#39;MattermostManager&#39;</span> <span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span> <span class="p">)</span>

<span class="c1"># requests overrides the simple authentication token header if it finds the entry in </span>
<span class="c1"># the ~/.netrc file. Since we want to use ~/.netrc to retrieve the _token_, we need</span>
<span class="c1"># to provide our own Authenticator class:</span>

<span class="k">class</span> <span class="nc">TokenAuth</span><span class="p">(</span> <span class="n">requests</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">AuthBase</span> <span class="p">)</span> <span class="p">:</span>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">r</span> <span class="p">)</span> <span class="p">:</span>
        <span class="c1"># Implement my authentication</span>
        <span class="n">mmHost</span> <span class="o">=</span> <span class="s1">&#39;mattermost.host.in.netrc&#39;</span>
        <span class="p">(</span><span class="n">login</span><span class="p">,</span> <span class="n">account</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span> <span class="o">=</span> <span class="n">netrc</span><span class="o">.</span><span class="n">netrc</span><span class="p">()</span><span class="o">.</span><span class="n">authenticators</span><span class="p">(</span> <span class="n">mmHost</span> <span class="p">)</span>
        <span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span> <span class="s1">&#39;Authorization&#39;</span> <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Bearer </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">password</span>
        <span class="k">return</span> <span class="n">r</span>


<span class="k">class</span> <span class="nc">MattermostManager</span><span class="p">(</span> <span class="nb">object</span> <span class="p">)</span> <span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>

        <span class="c1"># Get the _token_ (as &quot;password&quot;) from the ~/.netrc file.</span>
        <span class="c1"># the corresponding line in the file should look like:</span>
        <span class="c1"># &lt;mattermost.host.in.netrc&gt; foo foo &lt;long-string-of-token&gt;</span>
        <span class="c1"># The &quot;login&quot; and &quot;account&quot; (both set to &quot;foo&quot; in the example are ignored)</span>
        
        <span class="n">mmHost</span> <span class="o">=</span> <span class="s1">&#39;mattermost.host.in.netrc&#39;</span>
        <span class="p">(</span><span class="n">login</span><span class="p">,</span> <span class="n">account</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span> <span class="o">=</span> <span class="n">netrc</span><span class="o">.</span><span class="n">netrc</span><span class="p">()</span><span class="o">.</span><span class="n">authenticators</span><span class="p">(</span> <span class="n">mmHost</span> <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span> <span class="s2">&quot;Going to set up driver for connection to </span><span class="si">%s</span><span class="s2"> &quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mmHost</span><span class="p">,)</span> <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mmDriver</span> <span class="o">=</span> <span class="n">Driver</span><span class="p">(</span> <span class="n">options</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;url&#39;</span>    <span class="p">:</span> <span class="n">mmHost</span><span class="p">,</span>
            <span class="s1">&#39;scheme&#39;</span> <span class="p">:</span> <span class="s1">&#39;https&#39;</span><span class="p">,</span>
            <span class="s1">&#39;port&#39;</span>   <span class="p">:</span> <span class="mi">443</span><span class="p">,</span>
            <span class="s1">&#39;auth&#39;</span>   <span class="p">:</span> <span class="n">TokenAuth</span><span class="p">,</span> <span class="c1"># use the new Authenticator class defined above</span>
        <span class="p">}</span> <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mmDriver</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span> <span class="n">user_id</span><span class="o">=</span><span class="s1">&#39;me&#39;</span> <span class="p">)</span>

    <span class="k">def</span> <span class="nf">getTeamMembers</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">teamName</span> <span class="p">)</span> <span class="p">:</span>

        <span class="c1"># for restricted teams, we need to get the ID first, and</span>
        <span class="c1"># for this, we need to have the &quot;name&quot; (as in the URL), not</span>
        <span class="c1"># the &quot;display name&quot;, as shown in the GUIs:</span>

        <span class="n">team0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mmDriver</span><span class="o">.</span><span class="n">teams</span><span class="o">.</span><span class="n">get_team_by_name</span><span class="p">(</span> <span class="n">teamName</span> <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span> <span class="s1">&#39;team by name </span><span class="si">%s</span><span class="s1"> : </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">teamName</span><span class="p">,</span> <span class="n">team0</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">teamId</span> <span class="o">=</span> <span class="n">team0</span><span class="p">[</span> <span class="s1">&#39;id&#39;</span> <span class="p">]</span>

        <span class="n">team</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mmDriver</span><span class="o">.</span><span class="n">teams</span><span class="o">.</span><span class="n">check_team_exists</span><span class="p">(</span> <span class="n">teamName</span> <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span> <span class="s1">&#39;team </span><span class="si">%s</span><span class="s1"> - exists: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">teamName</span><span class="p">,</span> <span class="n">team</span><span class="p">[</span> <span class="s1">&#39;exists&#39;</span> <span class="p">])</span> <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">team</span><span class="p">[</span> <span class="s1">&#39;exists&#39;</span> <span class="p">]</span> <span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span> <span class="s1">&#39;no team with name </span><span class="si">%s</span><span class="s1"> found&#39;</span> <span class="o">%</span> <span class="n">teamName</span> <span class="p">)</span>
            <span class="k">return</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span> <span class="s1">&#39;found team </span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">teamName</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mmDriver</span><span class="o">.</span><span class="n">teams</span><span class="o">.</span><span class="n">get_team</span><span class="p">(</span> <span class="n">teamId</span> <span class="p">))</span> <span class="p">)</span>

        <span class="n">users</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getAllUsersForTeam</span><span class="p">(</span> <span class="n">teamId</span> <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span> <span class="s1">&#39;found </span><span class="si">%s</span><span class="s1"> users for team &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span> <span class="n">users</span> <span class="p">),</span> <span class="n">teamName</span><span class="p">)</span> <span class="p">)</span>

        <span class="k">return</span> <span class="n">users</span>

    <span class="k">def</span> <span class="nf">_getAllUsersForTeam</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">teamId</span> <span class="p">)</span> <span class="p">:</span>

        <span class="c1"># get all users for a team</span>
        <span class="c1"># with the max of 200 per page, we need to iterate a bit over the pages</span>

        <span class="n">users</span> <span class="o">=</span> <span class="p">[</span> <span class="p">]</span>
        <span class="n">pgNo</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">teamUsers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mmDriver</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">get_users</span><span class="p">(</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span> <span class="s1">&#39;in_team&#39;</span>  <span class="p">:</span> <span class="n">teamId</span><span class="p">,</span>
                                                            <span class="s1">&#39;page&#39;</span>     <span class="p">:</span> <span class="nb">str</span><span class="p">(</span> <span class="n">pgNo</span> <span class="p">),</span>
                                                            <span class="s1">&#39;per_page&#39;</span> <span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
                                                            <span class="p">}</span> <span class="p">)</span>
        <span class="k">while</span> <span class="n">teamUsers</span> <span class="p">:</span>
            <span class="n">users</span> <span class="o">+=</span> <span class="n">teamUsers</span>
            <span class="n">pgNo</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">teamUsers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mmDriver</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">get_users</span><span class="p">(</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span> <span class="s1">&#39;in_team&#39;</span>  <span class="p">:</span> <span class="n">teamId</span><span class="p">,</span>
                                                                <span class="s1">&#39;per_page&#39;</span> <span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
                                                                <span class="s1">&#39;page&#39;</span>     <span class="p">:</span> <span class="nb">str</span><span class="p">(</span> <span class="n">pgNo</span> <span class="p">),</span>
                                                                <span class="p">}</span> <span class="p">)</span>
        <span class="k">return</span> <span class="n">users</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span> <span class="p">:</span>
    <span class="n">mmM</span> <span class="o">=</span> <span class="n">MattermostManager</span><span class="p">()</span>
    <span class="n">mmM</span><span class="o">.</span><span class="n">getTeamMembers</span><span class="p">(</span> <span class="s1">&#39;myTeam&#39;</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-mattermostdriver.exceptions">
<span id="exceptions-that-api-requests-can-throw"></span><h2>Exceptions that api requests can throw<a class="headerlink" href="#module-mattermostdriver.exceptions" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="mattermostdriver.exceptions.InvalidOrMissingParameters">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mattermostdriver.exceptions.</span></code><code class="sig-name descname"><span class="pre">InvalidOrMissingParameters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mattermostdriver/exceptions.html#InvalidOrMissingParameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mattermostdriver.exceptions.InvalidOrMissingParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when mattermost returns a
400 Invalid or missing parameters in URL or request body</p>
</dd></dl>

<dl class="py class">
<dt id="mattermostdriver.exceptions.NoAccessTokenProvided">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mattermostdriver.exceptions.</span></code><code class="sig-name descname"><span class="pre">NoAccessTokenProvided</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mattermostdriver/exceptions.html#NoAccessTokenProvided"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mattermostdriver.exceptions.NoAccessTokenProvided" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when mattermost returns a
401 No access token provided</p>
</dd></dl>

<dl class="py class">
<dt id="mattermostdriver.exceptions.NotEnoughPermissions">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mattermostdriver.exceptions.</span></code><code class="sig-name descname"><span class="pre">NotEnoughPermissions</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mattermostdriver/exceptions.html#NotEnoughPermissions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mattermostdriver.exceptions.NotEnoughPermissions" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when mattermost returns a
403 Do not have appropriate permissions</p>
</dd></dl>

<dl class="py class">
<dt id="mattermostdriver.exceptions.ResourceNotFound">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mattermostdriver.exceptions.</span></code><code class="sig-name descname"><span class="pre">ResourceNotFound</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mattermostdriver/exceptions.html#ResourceNotFound"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mattermostdriver.exceptions.ResourceNotFound" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when mattermost returns a
404 Resource not found</p>
</dd></dl>

<dl class="py class">
<dt id="mattermostdriver.exceptions.ContentTooLarge">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mattermostdriver.exceptions.</span></code><code class="sig-name descname"><span class="pre">ContentTooLarge</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mattermostdriver/exceptions.html#ContentTooLarge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mattermostdriver.exceptions.ContentTooLarge" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when mattermost returns a
413 Content too large</p>
</dd></dl>

<dl class="py class">
<dt id="mattermostdriver.exceptions.FeatureDisabled">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mattermostdriver.exceptions.</span></code><code class="sig-name descname"><span class="pre">FeatureDisabled</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mattermostdriver/exceptions.html#FeatureDisabled"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mattermostdriver.exceptions.FeatureDisabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when mattermost returns a
501 Feature is disabled</p>
</dd></dl>

</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="endpoints.html" class="btn btn-neutral float-right" title="Endpoints" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Christian Plümer.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'7.2.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>